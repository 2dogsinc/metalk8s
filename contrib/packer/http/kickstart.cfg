install
cdrom
text
skipx

lang en_US.UTF-8
keyboard us
timezone --utc UTC

selinux --permissive
rootpw vagrant
auth --enableshadow --passalgo=sha512 --kickstart
user --name=vagrant --plaintext --password vagrant --groups=vagrant,wheel

network --bootproto=dhcp
firewall --disabled
services --enabled=NetworkManager,sshd

bootloader --location=mbr
zerombr
clearpart --all
part /boot --fstype ext4 --size=256 --label=boot
part pv.01 --size 1 --grow --ondisk=sda
volgroup kubevg pv.01
logvol / --vgname=kubevg --fstype=ext4 --size=4096 --name=root
logvol /var/lib/docker --vgname=kubevg --fstype=xfs --size=10240 --name=docker
logvol /var/log --vgname=kubevg --fstype=ext4 --size=8192 --name=log

firstboot --disabled
eula --agreed

url --url http://mirrors.atosworldline.com/public/centos/7.4.1708/os/x86_64/

reboot

%packages --excludedocs --nobase
@Core
sudo
%end

%post
echo "vagrant        ALL=(ALL)       NOPASSWD: ALL" >> /etc/sudoers.d/vagrant
sed -i "s/^.*requiretty/#Defaults requiretty/" /etc/sudoers
yum clean all
%end
